<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Delivery App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: 'Inter', 'Kanit', sans-serif; }
        .card { background-color: white; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .btn-primary { background: linear-gradient(to right, #FF8C00, #FFA500); color: white; font-weight: bold; border-radius: 0.75rem; padding: 0.75rem 1.5rem; transition: all 0.2s; }
        .btn-primary:hover { transform: scale(1.05); }
        .btn-primary:disabled { background: #D1D5DB; cursor: not-allowed; }
        .btn-secondary { background-color: #f3f4f6; color: #1f2937; border: 1px solid #d1d5db; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 50; }
        .modal-content { background-color: white; padding: 1.5rem; border-radius: 1rem; width: 90%; max-width: 400px; }
    </style>
</head>
<body class="bg-gray-50">

    <div id="loading" class="flex items-center justify-center h-screen">
        <div class="text-center">
            <i class="fas fa-spinner fa-spin text-4xl text-orange-500"></i>
            <p class="mt-2 text-gray-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô...</p>
        </div>
    </div>

    <div id="app" class="hidden max-w-lg mx-auto pb-24">
        <!-- Header, Menu, Cart Button, Order Summary sections are mostly the same -->
        <div class="p-4 bg-white shadow-md sticky top-0 z-10">
            <div class="flex items-center space-x-4"><img id="userPicture" class="w-12 h-12 rounded-full border-2 border-orange-400" src="https://placehold.co/100x100/EFEFEF/AAAAAA?text=User" alt="User Profile Picture"><div><p class="text-gray-600 text-sm">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö</p><h1 id="userName" class="text-lg font-bold text-gray-800">...</h1></div></div>
        </div>
        <div class="p-4"><h2 class="text-2xl font-bold text-gray-800 mb-4">‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2><div id="menu-list" class="space-y-4"></div></div>
        <div class="fixed bottom-4 right-4"><button id="cartBtn" class="relative bg-orange-500 text-white p-4 rounded-full shadow-lg"><i class="fas fa-shopping-cart text-2xl"></i><span id="cart-badge" class="hidden absolute top-[-5px] right-[-10px] bg-red-500 text-white rounded-full w-6 h-6 text-sm flex items-center justify-center font-bold">0</span></button></div>
        <div id="order-summary" class="hidden fixed bottom-0 left-0 right-0 bg-white p-4 rounded-t-2xl shadow-2xl max-w-lg mx-auto"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2><button id="closeCartBtn"><i class="fas fa-times text-gray-500"></i></button></div><div id="cart-items" class="max-h-40 overflow-y-auto mb-4 space-y-2"></div><div class="flex justify-between items-center font-bold text-lg border-t pt-4"><span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span><span id="total-price">‡∏ø0</span></div><button id="confirmOrderBtn" class="w-full btn-primary mt-4" disabled><i class="fas fa-arrow-right mr-2"></i>‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button></div>
    </div>

    <!-- Payment Method Modal -->
    <div id="payment-modal" class="modal-overlay hidden">
        <div class="modal-content text-center">
            <h2 class="text-2xl font-bold mb-6">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
            <div class="space-y-4">
                <button id="cod-btn" class="w-full btn-primary btn-secondary"><i class="fas fa-hand-holding-usd mr-2"></i>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</button>
                <button id="bank-transfer-btn" class="w-full btn-primary"><i class="fas fa-qrcode mr-2"></i>‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</button>
            </div>
        </div>
    </div>
    
    <!-- Bank Transfer Modal -->
    <div id="bank-transfer-modal" class="modal-overlay hidden">
        <div class="modal-content text-center">
            <h2 class="text-2xl font-bold mb-4">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
            <p class="mb-4">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
            <!-- TODO: ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û QR Code ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            <img src="https://i.imgur.com/g2344zB.png" alt="QR Code" class="mx-auto mb-4 border rounded-lg">
            <p class="font-bold text-lg mb-4">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞: <span id="payment-total"></span> ‡∏ö‡∏≤‡∏ó</p>
            <input type="file" id="slip-upload" class="hidden" accept="image/*">
            <button onclick="document.getElementById('slip-upload').click()" class="w-full btn-primary"><i class="fas fa-upload mr-2"></i>‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
            <div id="slip-preview-container" class="hidden mt-4 text-left"><p class="font-semibold">‡∏™‡∏•‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ö:</p><img id="slip-preview" class="mx-auto max-h-40 rounded mt-2"></div>
        </div>
    </div>

    <!-- Address Modal -->
    <div id="address-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4 text-center">‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h2>
            <button id="get-location-btn" class="w-full btn-primary btn-secondary mb-4"><i class="fas fa-map-marker-alt mr-2"></i>‡πÅ‡∏ä‡∏£‡πå‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</button>
            <div id="location-status" class="hidden text-green-600 text-center mb-4 font-semibold"><i class="fas fa-check mr-2"></i>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
            <div>
                <label for="address-details" class="block font-medium">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà / ‡∏ã‡∏≠‡∏¢ / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
                <textarea id="address-details" rows="3" class="w-full border border-gray-300 p-2 rounded-md" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 123 ‡∏´‡∏°‡∏π‡πà 4 ‡∏ã‡∏≠‡∏¢ 5"></textarea>
            </div>
            <button id="submit-final-order-btn" class="w-full btn-primary mt-6"><i class="fas fa-paper-plane mr-2"></i>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- State Variables ---
            // TODO: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà Direct Link ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Imgur ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            const menuItems = [
                { id: 1, name: "‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö", price: 60, image: "https://i.imgur.com/J8Yf4zL.jpeg" },
                { id: 2, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏õ‡∏π", price: 70, image: "https://i.imgur.com/S21eWzG.jpeg" },
                { id: 3, name: "‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö", price: 60, image: "https://i.imgur.com/L9a2a6E.jpeg" },
                { id: 4, name: "‡∏ú‡∏±‡∏î‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß", price: 55, image: "https://i.imgur.com/Q3d2m1T.jpeg" },
                { id: 5, name: "‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢", price: 35, image: "https://i.imgur.com/yOa2m9e.jpeg" }
            ];
            let cart = [];
            let paymentMethod = '';
            let locationData = null;

            // --- UI Elements ---
            const loadingEl = document.getElementById('loading');
            const appEl = document.getElementById('app');
            const menuListEl = document.getElementById('menu-list');
            const cartBtn = document.getElementById('cartBtn');
            const closeCartBtn = document.getElementById('closeCartBtn');
            const orderSummaryEl = document.getElementById('order-summary');
            const cartBadge = document.getElementById('cart-badge');
            const cartItemsEl = document.getElementById('cart-items');
            const totalPriceEl = document.getElementById('total-price');
            const confirmOrderBtn = document.getElementById('confirmOrderBtn');
            
            const paymentModal = document.getElementById('payment-modal');
            const codBtn = document.getElementById('cod-btn');
            const bankTransferBtn = document.getElementById('bank-transfer-btn');

            const bankTransferModal = document.getElementById('bank-transfer-modal');
            const paymentTotalEl = document.getElementById('payment-total');
            const slipUploadInput = document.getElementById('slip-upload');
            const slipPreviewContainer = document.getElementById('slip-preview-container');
            const slipPreviewImg = document.getElementById('slip-preview');

            const addressModal = document.getElementById('address-modal');
            const getLocationBtn = document.getElementById('get-location-btn');
            const locationStatus = document.getElementById('location-status');
            const addressDetailsInput = document.getElementById('address-details');
            const submitFinalOrderBtn = document.getElementById('submit-final-order-btn');

            // --- Main Initialization ---
            async function main() {
                try {
                    await liff.init({ liffId: "2007930661-Meaz8v4l" });
                    if (!liff.isInClient()) {
                        loadingEl.innerHTML = `<p class="text-red-500">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô LINE</p>`;
                        return;
                    }
                    if (!liff.isLoggedIn()) {
                        liff.login();
                        return;
                    }
                    const profile = await liff.getProfile();
                    document.getElementById('userName').textContent = profile.displayName;
                    document.getElementById('userPicture').src = profile.pictureUrl;
                    renderMenu();
                    loadingEl.classList.add('hidden');
                    appEl.classList.remove('hidden');
                } catch (error) {
                    console.error('LIFF Initialization failed', error);
                    loadingEl.innerHTML = `<p class="text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</p>`;
                }
            }

            // --- UI Rendering Functions ---
            function renderMenu() { menuListEl.innerHTML='';menuItems.forEach(i=>{const e=document.createElement('div');e.className='card flex items-center p-3 space-x-4',e.innerHTML=`<img src="${i.image}" alt="${i.name}" class="w-20 h-20 rounded-lg object-cover"><div class="flex-grow"><h3 class="font-bold text-lg">${i.name}</h3><p class="text-gray-600">‡∏ø${i.price}</p></div><button class="btn-add" data-id="${i.id}"><i class="fas fa-plus mr-1"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°</button>`,menuListEl.appendChild(e)})}
            function renderCart() { cartItemsEl.innerHTML='';let t=0,e=0;const n=cart.reduce((i,l)=>{i[l.id]||(i[l.id]={...l,quantity:0}),i[l.id].quantity++;return i},{});0===Object.keys(n).length?(cartItemsEl.innerHTML='<p class="text-center text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>',confirmOrderBtn.disabled=!0):(confirmOrderBtn.disabled=!1,Object.values(n).forEach(i=>{const l=document.createElement('div');l.className='flex justify-between items-center',l.innerHTML=`<div><span class="font-semibold">${i.name}</span><span class="text-gray-500 text-sm"> x${i.quantity}</span></div><span class="font-semibold">‡∏ø${i.price*i.quantity}</span>`,cartItemsEl.appendChild(l)})),cart.forEach(i=>{t+=i.price,e++}),totalPriceEl.textContent=`‡∏ø${t}`,paymentTotalEl.textContent=t,cartBadge.textContent=e,cartBadge.classList.toggle('hidden',0===e)}

            // --- App Flow Functions ---
            function showAddressModal() {
                paymentModal.classList.add('hidden');
                bankTransferModal.classList.add('hidden');
                addressModal.classList.remove('hidden');
            }

            async function submitFinalOrder() {
                const addressDetails = addressDetailsInput.value.trim();
                if (!locationData) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ä‡∏£‡πå‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö');
                    return;
                }
                if (!addressDetails) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏£‡∏±‡∏ö');
                    return;
                }

                let messageText = "üîî ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö\n\n--- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ---\n";
                let totalPrice = 0;
                const groupedCart = cart.reduce((acc, item) => { if (!acc[item.id]) { acc[item.id] = { ...item, quantity: 0 }; } acc[item.id].quantity++; return acc; }, {});
                Object.values(groupedCart).forEach(item => { messageText += `- ${item.name} x${item.quantity} = ${item.price * item.quantity} ‡∏ö.\n`; totalPrice += item.price * item.quantity; });
                messageText += `\n‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${totalPrice} ‡∏ö‡∏≤‡∏ó`;
                messageText += `\n‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô: ${paymentMethod}`;
                messageText += `\n\n--- ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á ---\n${addressDetails}`;
                
                const locationMessage = `https://www.google.com/maps?q=${locationData.latitude},${locationData.longitude}`;
                
                try {
                    await liff.sendMessages([
                        { type: 'text', text: messageText },
                        { type: 'text', text: `üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${locationMessage}` }
                    ]);
                    alert("‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
                    liff.closeWindow();
                } catch (error) {
                    console.error('Error sending message: ', error);
                    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå");
                }
            }

            // --- Event Listeners ---
            menuListEl.addEventListener('click', (e) => { const btn = e.target.closest('.btn-add'); if(btn) { const itemId = btn.dataset.id; const selectedItem = menuItems.find(item => item.id == itemId); cart.push(selectedItem); renderCart(); }});
            cartBtn.addEventListener('click', () => { if (cart.length > 0) orderSummaryEl.classList.remove('hidden'); else alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö'); });
            closeCartBtn.addEventListener('click', () => { orderSummaryEl.classList.add('hidden'); });
            
            confirmOrderBtn.addEventListener('click', () => {
                orderSummaryEl.classList.add('hidden');
                paymentModal.classList.remove('hidden');
            });

            codBtn.addEventListener('click', () => {
                paymentMethod = '‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á';
                showAddressModal();
            });

            bankTransferBtn.addEventListener('click', () => {
                paymentMethod = '‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£';
                paymentModal.classList.add('hidden');
                bankTransferModal.classList.remove('hidden');
            });

            slipUploadInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        slipPreviewImg.src = event.target.result;
                        slipPreviewContainer.classList.remove('hidden');
                        
                        // NEW: Go to address modal immediately after uploading slip
                        setTimeout(() => {
                            showAddressModal();
                        }, 500); // Add a small delay to let user see the preview
                    };
                    reader.readAsDataURL(file);
                }
            });

            getLocationBtn.addEventListener('click', async () => {
                try {
                    const location = await liff.getLocation();
                    locationData = location;
                    locationStatus.classList.remove('hidden');
                    getLocationBtn.classList.add('hidden');
                } catch (error) {
                    console.error(error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ LINE');
                }
            });

            submitFinalOrderBtn.addEventListener('click', submitFinalOrder);

            // --- Initialize App ---
            main();
        });
    </script>
</body>
</html>
